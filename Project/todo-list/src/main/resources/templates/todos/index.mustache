{{>layouts/header}}

<style>
    .status-text{
        display : none;
    }

    .status-sec{
        margin: 50px;
    }

    .fixed-table{
        table-layout: fixed;
        width: 50%;
    }

    .fixed-table th, .fixed-table td{
        width: 100%;
        word-wrap: break-word;  /* 요소가 튀어나가지 않게 한도내에서 강제 줄바꿈 */
    }
</style>

<section class="status-sec">
    <h2>준비</h2>
    <table class="table fixed-table">
        <thead>
            <tr>
                <th>Id</th>
                <th>작업</th>
                <th>상태변경</th>
            </tr>
        </thead>
        <tbody>
            {{#readyList}}
                <tr>
                    <td>{{id}}</td>
                    <td>
                        {{title}}
                        <button type="button" class="btn btn-sm btn-outline-primary"
                                data-bs-toggle="modal"
                                data-bs-target="#task-edit-modal"
                                data-bs-id="{{id}}"
                                data-bs-title="{{title}}"
                                data-bs-status="{{status}}">
                            수정
                        </button>

                        <button type="button" class="btn btn-sm btn-outline-danger task-delete-btn"
                                data-task-id="{{id}}">삭제</button>
                    </td>
                    <td class="status-text" data-status="{{status}}">{{status}}</td>  <!-- Mustache 값 활용, css에서 숨김처리함 -->
                    <td>
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary status-btn {{#isReady}}active{{/isReady}}" data-id="{{id}}" data-status="준비">준비</button>
                            <button class="btn btn-outline-warning status-btn {{#isProceed}}active{{/isProceed}}" data-id="{{id}}" data-status="진행중">진행중</button>
                            <button class="btn btn-outline-danger status-btn {{#isStop}}active{{/isStop}}" data-id="{{id}}" data-status="중단됨">중단됨</button>
                            <button class="btn btn-outline-success status-btn {{#isCompleted}}active{{/isCompleted}}" data-id="{{id}}" data-status="완료">완료</button>
                        </div>
                    </td>
                </tr>
            {{/readyList}}
        </tbody>
    </table>
</section>

<section class="status-sec">
    <h2>진행중</h2>
    <table class="table fixed-table">
        <thead>
        <tr>
            <th>Id</th>
            <th>작업</th>
            <th>상태변경</th>
        </tr>
        </thead>
        <tbody>
        {{#inProgressList}}
            <tr>
                <td>{{id}}</td>
                <td>
                    {{title}}
                    <button type="button" class="btn btn-sm btn-outline-primary"
                            data-bs-toggle="modal"
                            data-bs-target="#task-edit-modal"
                            data-bs-id="{{id}}"
                            data-bs-title="{{title}}"
                            data-bs-status="{{status}}">
                        수정
                    </button>

                    <button type="button" class="btn btn-sm btn-outline-danger task-delete-btn"
                            data-task-id="{{id}}">삭제</button>
                </td>
                <td class="status-text" data-status="{{status}}">{{status}}</td>  <!-- Mustache 값 활용, css에서 숨김처리함 -->
                <td>
                    <div class="btn-group" role="group">
                        <button class="btn btn-outline-primary status-btn {{#isReady}}active{{/isReady}}" data-id="{{id}}" data-status="준비">준비</button>
                        <button class="btn btn-outline-warning status-btn {{#isProceed}}active{{/isProceed}}" data-id="{{id}}" data-status="진행중">진행중</button>
                        <button class="btn btn-outline-danger status-btn {{#isStop}}active{{/isStop}}" data-id="{{id}}" data-status="중단됨">중단됨</button>
                        <button class="btn btn-outline-success status-btn {{#isCompleted}}active{{/isCompleted}}" data-id="{{id}}" data-status="완료">완료</button>
                    </div>
                </td>
            </tr>
        {{/inProgressList}}
        </tbody>
    </table>
</section>

<section class="status-sec">
    <h2>중단됨</h2>
    <table class="table fixed-table">
        <thead>
        <tr>
            <th>Id</th>
            <th>작업</th>
            <th>상태변경</th>
        </tr>
        </thead>
        <tbody>
        {{#stoppedList}}
            <tr>
                <td>{{id}}</td>
                <td>
                    {{title}}
                    <button type="button" class="btn btn-sm btn-outline-primary"
                            data-bs-toggle="modal"
                            data-bs-target="#task-edit-modal"
                            data-bs-id="{{id}}"
                            data-bs-title="{{title}}"
                            data-bs-status="{{status}}">
                        수정
                    </button>

                    <button type="button" class="btn btn-sm btn-outline-danger task-delete-btn"
                            data-task-id="{{id}}">삭제</button>
                </td>
                <td class="status-text" data-status="{{status}}">{{status}}</td>  <!-- Mustache 값 활용, css에서 숨김처리함 -->
                <td>
                    <div class="btn-group" role="group">
                        <button class="btn btn-outline-primary status-btn {{#isReady}}active{{/isReady}}" data-id="{{id}}" data-status="준비">준비</button>
                        <button class="btn btn-outline-warning status-btn {{#isProceed}}active{{/isProceed}}" data-id="{{id}}" data-status="진행중">진행중</button>
                        <button class="btn btn-outline-danger status-btn {{#isStop}}active{{/isStop}}" data-id="{{id}}" data-status="중단됨">중단됨</button>
                        <button class="btn btn-outline-success status-btn {{#isCompleted}}active{{/isCompleted}}" data-id="{{id}}" data-status="완료">완료</button>
                    </div>
                </td>
            </tr>
        {{/stoppedList}}
        </tbody>
    </table>
</section>

<section class="status-sec">
    <h2>완료</h2>
    <table class="table fixed-table">
        <thead>
        <tr>
            <th>Id</th>
            <th>작업</th>
            <th>상태변경</th>
        </tr>
        </thead>
        <tbody>
        {{#completedList}}
            <tr>
                <td>{{id}}</td>
                <td>
                    {{title}}
                    <button type="button" class="btn btn-sm btn-outline-primary"
                            data-bs-toggle="modal"
                            data-bs-target="#task-edit-modal"
                            data-bs-id="{{id}}"
                            data-bs-title="{{title}}"
                            data-bs-status="{{status}}">
                        수정
                    </button>

                    <button type="button" class="btn btn-sm btn-outline-danger task-delete-btn"
                            data-task-id="{{id}}">삭제</button>
                </td>
                <td class="status-text" data-status="{{status}}">{{status}}</td>  <!-- Mustache 값 활용, css에서 숨김처리함 -->
                <td>
                    <div class="btn-group" role="group">
                        <button class="btn btn-outline-primary status-btn {{#isReady}}active{{/isReady}}" data-id="{{id}}" data-status="준비">준비</button>
                        <button class="btn btn-outline-warning status-btn {{#isProceed}}active{{/isProceed}}" data-id="{{id}}" data-status="진행중">진행중</button>
                        <button class="btn btn-outline-danger status-btn {{#isStop}}active{{/isStop}}" data-id="{{id}}" data-status="중단됨">중단됨</button>
                        <button class="btn btn-outline-success status-btn {{#isCompleted}}active{{/isCompleted}}" data-id="{{id}}" data-status="완료">완료</button>
                    </div>
                </td>
            </tr>
        {{/completedList}}
        </tbody>
    </table>
</section>


<!-- 기존 id 단순 정렬 코드 -->
<!--<table class="table">-->
<!--    <thead>-->
<!--    <tr>-->
<!--        &lt;!&ndash; 나중에 Id는 보이지 않게 수정할 것 &ndash;&gt;-->
<!--        <th scope="col">Id</th>-->
<!--        <th scope="col">작업</th>-->
<!--        <th scope="col">상태변경</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    {{#todoList}}-->
<!--        <tr>-->
<!--            <th>{{id}}</th>-->
<!--            <td>-->
<!--                {{title}}-->
<!--                &lt;!&ndash; Button trigger modal &ndash;&gt;-->
<!--                <button type="button" class="btn btn-sm btn-outline-primary"-->
<!--                        data-bs-toggle="modal"-->
<!--                        data-bs-target="#task-edit-modal"-->
<!--                        data-bs-id="{{id}}"-->
<!--                        data-bs-title="{{title}}"-->
<!--                        data-bs-status="{{status}}">-->
<!--                    수정-->
<!--                </button>-->

<!--                <button type="button" class="btn btn-sm btn-outline-danger task-delete-btn"-->
<!--                data-task-id="{{id}}">삭제</button>-->
<!--            </td>-->
<!--            &lt;!&ndash; 나중에 상태는 안보이게 라디오버튼으로 대체 할 것 &ndash;&gt;-->
<!--&lt;!&ndash;            <td>{{status}}</td>&ndash;&gt;-->
<!--            <td class="status-text" data-status="{{status}}">{{status}}</td>  &lt;!&ndash; Mustache 값 활용, css에서 숨김처리함 &ndash;&gt;-->
<!--            <td>-->
<!--                <div class="btn-group" role="group">-->
<!--                    <button class="btn btn-outline-primary status-btn {{#isReady}}active{{/isReady}}" data-id="{{id}}" data-status="준비">준비</button>-->
<!--                    <button class="btn btn-outline-warning status-btn {{#isProceed}}active{{/isProceed}}" data-id="{{id}}" data-status="진행중">진행중</button>-->
<!--                    <button class="btn btn-outline-danger status-btn {{#isStop}}active{{/isStop}}" data-id="{{id}}" data-status="중단됨">중단됨</button>-->
<!--                    <button class="btn btn-outline-success status-btn {{#isCompleted}}active{{/isCompleted}}" data-id="{{id}}" data-status="완료">완료</button>-->
<!--                </div>-->
<!--            </td>-->

<!--        </tr>-->
<!--    {{/todoList}}-->
<!--    </tbody>-->
<!--</table>-->

<div class="card m-2" id="todo-new">
    <div class="card-body">
        <!-- 할일 추가 폼 -->
        <form action="/todos/add" method="post">
            <div class="mb-3">
                <label for="new-task" class="form-label">작업이름</label>
                <input type="text" class="form-control" id="new-task" name="title">
            </div>

            <button type="submit" class="btn btn-primary" id="task-add-btn">작업 추가</button>
        </form>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="task-edit-modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">작업 이름 수정</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="edit-task-title" class="form-label">수정 할 이름</label>
                        <input type="text" class="form-control" id="edit-task-title">
                    </div>
                    <input type="hidden" id="edit-task-id">
                    <input type="hidden" id="edit-task-status">

                    <button type="button" class="btn btn-primary" id="task-edit-btn">작업 수정</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/js/todos/index.js"></script>

{{>layouts/footer}}